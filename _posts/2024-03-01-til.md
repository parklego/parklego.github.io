---
title: 2024-03-TIL
author: parklego
date: 2024-03-01
category: TIL
layout: post
---

## Jekyll을 사용하여 GitHub Pages 배포 및 테마적용

> 사전 준비

- Ruby 설치
- Jekyll 설치
- 테마 선택
  - [jamstackthemes.dev](http://jamstackthemes.dev)
  - [http://jekyllthemes.org/](http://jekyllthemes.org/)
- 코드블럭 선택
  - [https://spsarolkar.github.io/rouge-theme-preview/](https://spsarolkar.github.io/rouge-theme-preview/)
    <br/>

> 배포 및 테마 적용하기

1. github repository 생성

   - repository명은 github 아이디.github.io로 생성할 것
   - repository는 public 으로 할 것
   - ex) parklego.github.io

2. bundle 명령어 실행

   ```javascript
   bundle install
   bundle exec jekyll serve
   ```

3. 블로그 설정
   - \_conif.yml 파일에서 제목이나 이름 등을 변경
   - \_posts 폴더에 원하는 게시글 작성 (yyy-mm-dd 형태)

## 웹 접근성

웹 접근성(a11y)는 정보에 동등하게 접근하고 이해 할 수 있도록 보장하기 위해 중요하다.

- [wai-aria란?](https://story.pxd.co.kr/1588)
- [aria 사용방법](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques)
- 리액트 jsx에서 `wai-aria`를 지원한다.
- `aria-\*` 과 같은 어트리뷰트는 kebab-case로 작성해야한다.

### role

- 태그의 역할을 알려주는 속성
- 정해진 값만 사용하여야 한다.

### aria-label

- 스크린 리더기에 전달할 내용을 알려주는 속성
- 예를들어, 어코디언이 있으면 펼치기와 같이 `aria-label`를 통해 알려줄 수 있다.
- 주의할 점은 시멘틱 태그이거나, role 속성 값이 상호작용(interactive)을 하는 값일 때 aria-label을 붙일 수 있다는 것이다.
- [aria-label과 role을 쓰기 위한 규칙](https://velog.io/@a_in/WAI-ARIA-role-aria-label)

### tabindex

- `0` : 상호작용 가능한 요소 처럼 포커싱이 된다.
- `-1` : 포커싱에서 제외 된다.
- `양수` : 강제로 순서를 정한다. 그 이후에 브라우저의 포커싱 순서대로 잡힌다. 무조건 피해야함.

### img alt

- 이미지가 나오지 않을 때, 이미지에 대한 설명

### aria-required

- `true`인 경우, 스크린 리더기에 필수요소임을 알려주는 속성

## SSR과 CSR 차이

![img](https://d2.naver.com/content/images/2020/06/ssr.png)

1. 서버단에서 내용을 채워넣은 뒤 (서버에서 랜더링) 응답 값으로 이를 보내준다.
2. 브라우저에서 채워넣은 내용을 볼 수 있다. 브라우저에서 js를 다운 받는다.
3. 브라우저에서 다운로드 받은 js를 실행한다.
4. 페이지에서 상호작용을 할 수 있다.

<br/>
<br/>

![img](https://d2.naver.com/content/images/2020/06/csr.png)

1. 서버단에서 껍데기를 보내준다.
2. 브라우저에서 js를 다운 받는다.
3. 브라우저에서 다운로드 받은 js를 실행한다.
4. 실행되면서 페이지에 그려지고, 이때 상호작용을 할 수 있다.

<br/>

## 검색엔진 최적화(SEO)

### SSR

가장 좋은 방법은 SSR을 이용하는 것이다.

검색 봇은 크롤링을 하는데 CSR은 내용을 볼 수 없기 때문에 SEO에 취약하다.
그렇다면 React에서는 이를 어떻게 보완할 수 있을까?

### 메타태그

메타 태그와 og태그(오픈그래프)를 사용해야한다.
그 중에 가장 중요한 태그는 `title`,`description`,`robots`,`charset`,`viewport`

### robots.txt

검색 엔진 크롤러가 웹 사이트를 적절하게 색인하도록 지시하고, 부적절한 콘텐츠를 제한하여 SEO를 개선할 수 있다.

### sitemap.xml

웹사이트에 새로운 콘텐츠가 발행될 때마다 해당 URL을 사이트맵에 추가하여 주기적으로 사이트맵을 업데이트하는 것이 필요

### 서치콘솔 등록

- Google Search Console
- 네이버 서치어드바이저

### https

구글은 보안 프로토콜을 적용한 웹사이트에게 적용하지 않은 웹사이트(HTTP)보다 더 높은 점수를 부여할 것이라고 발표

### 모바일 친화성 갖추기

구글은 2018년부터 본격적으로 모바일 중심 색인 생성을 시작

### react-snap

- Prerendering.
- 유지보수가 중단되었다고 한다..

### react-helmet

- `<head>` 섹션을 동적으로 관리하기 위한 라이브러리
- 페이지 별로 메타데이터를 설정해 줄 수 있다.

<br/>

#### 읽어보면 좋은 자료

[SSR과 CSR 이 영상 하나로 끝내기](https://www.youtube.com/watch?v=D71ByEIBWEs)

[SSR 도입](https://d2.naver.com/helloworld/7804182)

## JWT 적용기 (cookie)

> 사전 준비

1. cookie parser
2. cors
   - origin 설정
   - credentials true

<br/>

> JWT 로직

- 로그인 시 인증 서버로부터 access token, refresh token을 쿠키에 넣어서 보내준다.

  (중요) refresh token은 httpOnly / secure / SameSite 옵션을 준다.

  ```javascript
  {
    maxAge: 300000, // 5m
    httpOnly: true,
    secure: true,
    sameSite: "strict"
  }
  ```

- 인증 체계를 다음과 같이 만든다.

  1.  쿠키에 엑세스토큰이 있는지 확인한다.

      - 엑세스 토큰이 없다면 엑세스토큰을 재발급 절차를 받는다. (2번으로 이동)
      - 엑세스 토큰 있다면 엑세스토큰을 확인 절차를 밟는다. (종료)

  2.  재발급을 받는 절차에서 리프레시 토큰을 확인한다.
      - 리프레시 토큰이 없거나 유효하지 않으면 로그인 페이지로 이동시킨다. (종료)
      - 리프레시 토큰이 유효하다면 새로운 엑세스토큰을 발급해준다.
